<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admin | Página 3D</title>
  <link rel="stylesheet" href="css/style.css" />
  <style>
    .admin-wrap{display:grid;grid-template-columns:220px 1fr;gap:16px}
    .admin-nav a{display:block;padding:8px 10px;border-radius:8px;margin:4px 0;color:var(--text);text-decoration:none;border:1px solid var(--border)}
    .admin-nav a.active{background:var(--card);border-color:var(--accent);color:var(--accent)}
    .table{width:100%;border-collapse:collapse}
    .table th,.table td{border-bottom:1px solid var(--border);padding:6px 8px;text-align:left}
    .pill{display:inline-block;padding:2px 8px;border:1px solid var(--border);border-radius:999px;font-size:12px}
    .row{display:flex;gap:8px;align-items:center}
    .grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .thumbs{display:flex;flex-wrap:wrap;gap:8px}
    .thumbs img{width:64px;height:64px;object-fit:cover;border-radius:8px;border:1px solid var(--border)}
    .hidden{display:none}
  </style>
  <script>window.ADMIN=true;</script>
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a class="logo" href="index.html">Página3D</a>
      <button class="nav-toggle" aria-controls="main-nav" aria-expanded="false" aria-label="Menú">☰</button>
      <nav id="main-nav" class="main-nav" aria-label="Principal">
        <a href="index.html">Inicio</a>
        <a href="productos.html">Productos</a>
        <a href="contacto.html">Contacto</a>
      </nav>
    </div>
  </header>

  <main class="container section">
    <h1 class="section-title">Panel de Administración</h1>
    <div id="admin-note" class="account-note"></div>
    <div class="admin-wrap">
      <aside class="admin-nav">
        <a href="#dash" data-view="dash" class="active">Dashboard</a>
        <a href="#products" data-view="products">Productos</a>
        <a href="#orders" data-view="orders">Pedidos</a>
        <a href="#users" data-view="users">Usuarios</a>
      </aside>
      <section>
        <div id="view-dash">
          <div class="grid2">
            <div class="card" style="padding:12px"><div class="row"><strong>Productos:</strong><span id="st-products">0</span></div></div>
            <div class="card" style="padding:12px"><div class="row"><strong>Pedidos:</strong><span id="st-orders">0</span></div></div>
            <div class="card" style="padding:12px"><div class="row"><strong>Usuarios:</strong><span id="st-users">0</span></div></div>
            <div class="card" style="padding:12px"><div class="row"><strong>Ventas:</strong><span id="st-sales">$0</span></div></div>
          </div>
        </div>

        <div id="view-products" class="hidden">
          <div class="row" style="justify-content:space-between;margin-bottom:8px">
            <h3>Productos</h3>
            <button id="btn-new" class="btn btn-primary">Nuevo producto</button>
          </div>
          <table class="table" id="tbl-products"><thead><tr><th>ID</th><th>Nombre</th><th>Precio</th><th>Activo</th><th>Stock</th><th>Oferta%</th><th></th></tr></thead><tbody></tbody></table>
          <dialog id="dlg-product">
            <form method="dialog" id="frm-product" style="min-width:640px">
              <h3 id="dlg-title">Producto</h3>
              <div class="grid2">
                <div>
                  <label>Nombre<input id="p-nombre" type="text" required></label>
                  <label>Precio<input id="p-precio" type="number" step="0.01" required></label>
                  <label>Activo<input id="p-activo" type="checkbox"></label>
                  <label>Stock<input id="p-stock" type="number"></label>
                  <label>Oferta %<input id="p-oferta" type="number" min="0" max="90"></label>
                  <label>Desde<input id="p-odesde" type="datetime-local"></label>
                  <label>Hasta<input id="p-ohasta" type="datetime-local"></label>
                </div>
                <div>
                  <label>Descripción<textarea id="p-descripcion" rows="4"></textarea></label>
                  <label>Especificaciones (una por línea)<textarea id="p-espec" rows="4"></textarea></label>
                  <div class="row"><label>Imagen principal</label><input id="p-img-main" type="text" placeholder="img/..." style="flex:1"><input type="file" id="up-main" accept="image/*"></div>
                  <div>
                    <div class="row" style="justify-content:space-between"><label>Miniaturas</label><input type="file" id="up-thumbs" accept="image/*" multiple></div>
                    <div id="thumbs" class="thumbs"></div>
                  </div>
                </div>
              </div>
              <menu style="margin-top:10px">
                <button value="cancel">Cancelar</button>
                <button id="btn-save" value="default" class="btn btn-primary">Guardar</button>
              </menu>
            </form>
          </dialog>
        </div>

        <div id="view-orders" class="hidden">
          <h3>Pedidos</h3>
          <table class="table" id="tbl-orders"><thead><tr><th>ID</th><th>Usuario</th><th>Estado</th><th>Total</th><th>Creado</th></tr></thead><tbody></tbody></table>
        </div>

        <div id="view-users" class="hidden">
          <h3>Usuarios</h3>
          <table class="table" id="tbl-users"><thead><tr><th>ID</th><th>Nombre</th><th>Usuario</th><th>Email</th><th>Rol</th><th></th></tr></thead><tbody></tbody></table>
        </div>
      </section>
    </div>
  </main>

  <footer class="site-footer">
    <div class="container footer-inner">
      <div><strong>Página3D</strong></div>
      <div class="footer-copy">© 2025 Página3D</div>
    </div>
  </footer>

  <script src="js/site.js" defer></script>
  <script src="js/admin.js" defer></script>
</body>
<html>
